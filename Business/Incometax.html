<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>USA Income Tax Calculator â€“ Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;font-family:Inter,system-ui;background:#f5f7fb}
.container{max-width:1300px;margin:auto;padding:20px}
h1{text-align:center;color:#2563eb}
.grid{display:grid;grid-template-columns:1fr 1.3fr;gap:20px}
.card{background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:20px}
label{font-size:13px;color:#6b7280}
input,select,button{width:100%;padding:10px;margin:6px 0 14px;border-radius:10px;border:1px solid #e5e7eb}
button{background:#2563eb;color:#fff;border:none;cursor:pointer}
button.secondary{background:#eef2ff;color:#111}
.section{font-weight:700;margin:10px 0}
.results{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.box{background:#f8fafc;border-radius:12px;padding:14px;text-align:center}
.box h3{margin:0;color:#2563eb}
.box span{font-size:12px;color:#6b7280}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{padding:8px;border-bottom:1px solid #e5e7eb;text-align:right}
th{text-align:left;color:#374151}
canvas{margin-top:20px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
</style>
</head>

<body>
<div class="container">
<h1>ðŸ‡ºðŸ‡¸ USA Income Tax Calculator (Pro)</h1>

<div class="grid">

<!-- INPUT -->
<div class="card">
<div class="section">Income</div>
<label>Annual Income ($)</label>
<input id="income" value="85000">

<label>Annual Income Growth (%)</label>
<input id="growth" value="3">

<label>Pre-Tax Deductions (401k / HSA)</label>
<input id="pretax" value="5000">

<label>Employment Type</label>
<select id="employment">
<option value="w2">W-2 Employee</option>
<option value="se">Self-Employed (1099)</option>
</select>

<label>Children (Child Tax Credit)</label>
<input id="children" value="1">

<div class="section">Itemized Deductions</div>
<label>Mortgage Interest</label>
<input id="mortgage" value="6000">

<label>State & Local Taxes (SALT)</label>
<input id="salt" value="8000">

<label>Charitable Donations</label>
<input id="charity" value="2000">

<label>Medical Expenses</label>
<input id="medical" value="1000">

<div class="section">State & Projection</div>
<label>State Tax Rate (%)</label>
<input id="stateRate" value="2">

<label>Projection Years</label>
<select id="years">
<option>5</option>
<option selected>10</option>
</select>

<button onclick="calculate()">Calculate</button>
<button class="secondary" onclick="location.reload()">Clear</button>
</div>

<!-- OUTPUT -->
<div class="card">
<div class="results">
<div class="box"><h3 id="taxable">$0</h3><span>Taxable Income</span></div>
<div class="box"><h3 id="federal">$0</h3><span>Federal Tax</span></div>
<div class="box"><h3 id="state">$0</h3><span>State Tax</span></div>
<div class="box"><h3 id="fica">$0</h3><span>Payroll / SE</span></div>
<div class="box"><h3 id="total">$0</h3><span>Total Tax</span></div>
<div class="box"><h3 id="takehome">$0</h3><span>Take-Home Pay</span></div>
<div class="box"><h3 id="effective">0%</h3><span>Effective Rate</span></div>
<div class="box"><h3 id="marginal">0%</h3><span>Marginal Rate</span></div>
</div>

<canvas id="chart" height="220"></canvas>

<table>
<thead>
<tr><th>Year</th><th>Income</th><th>Total Tax</th><th>Take-Home</th></tr>
</thead>
<tbody id="table"></tbody>
</table>

<button class="secondary" onclick="window.print()">Print</button>
</div>

</div>
</div>

<script>
let chart;

const money = n => "$" + Math.round(n).toLocaleString();

function federalTax(taxable){
const brackets = [
 [11000,0.10],
 [44725,0.12],
 [95375,0.22],
 [182100,0.24]
];
let tax = 0, prev = 0, marginal = 0;
for(const [limit,rate] of brackets){
 const slice = Math.min(taxable, limit - prev);
 if(slice > 0){
   tax += slice * rate;
   taxable -= slice;
   marginal = rate;
 }
 prev = limit;
}
if(taxable > 0){
 tax += taxable * 0.32;
 marginal = 0.32;
}
return [tax, marginal];
}

function calculate(){
let inc = +income.value;
let growth = +growth.value / 100;
let pretax = +pretax.value;
let kids = +children.value;
let yearsN = +years.value;
let stateRatePct = +stateRate.value / 100;
let type = employment.value;

const table = document.getElementById("table");
table.innerHTML = "";

let labels=[], taxArr=[], takeArr=[];

for(let y=1;y<=yearsN;y++){
 let agi = inc - pretax;

 // Payroll / SE tax
 let payroll = type==="w2" ? inc*0.0765 : inc*0.153;

 // SE tax adjustment
 if(type==="se"){
   agi -= payroll * 0.5;
 }

 // Itemized vs standard
 const standard = 13850;
 const itemized =
   +mortgage.value +
   Math.min(+salt.value,10000) +
   +charity.value +
   Math.max(0, +medical.value - agi*0.075);

 const deduction = Math.max(standard, itemized);
 const taxable = Math.max(0, agi - deduction);

 let [fed, marginal] = federalTax(taxable);

 // Child tax credit (non-refundable here)
 fed = Math.max(0, fed - kids*2000);

 const state = taxable * stateRatePct;
 const total = fed + state + payroll;
 const take = inc - total;

 if(y===1){
   taxableEl.textContent = money(taxable);
   federalEl.textContent = money(fed);
   stateEl.textContent = money(state);
   ficaEl.textContent = money(payroll);
   totalEl.textContent = money(total);
   takehomeEl.textContent = money(take);
   effectiveEl.textContent = ((total/inc)*100).toFixed(2)+"%";
   marginalEl.textContent = (marginal*100).toFixed(0)+"%";
 }

 table.innerHTML += `
 <tr>
  <td>${y}</td>
  <td>${money(inc)}</td>
  <td>${money(total)}</td>
  <td>${money(take)}</td>
 </tr>`;

 labels.push("Year "+y);
 taxArr.push(total);
 takeArr.push(take);

 inc *= (1 + growth);
}

if(chart) chart.destroy();
chart = new Chart(document.getElementById("chart"),{
 type:"line",
 data:{
  labels,
  datasets:[
   {label:"Total Tax",data:taxArr,borderColor:"#ef4444",tension:0.3},
   {label:"Take-Home",data:takeArr,borderColor:"#22c55e",tension:0.3}
  ]
 }
});
}

const taxableEl=document.getElementById("taxable");
const federalEl=document.getElementById("federal");
const stateEl=document.getElementById("state");
const ficaEl=document.getElementById("fica");
const totalEl=document.getElementById("total");
const takehomeEl=document.getElementById("takehome");
const effectiveEl=document.getElementById("effective");
const marginalEl=document.getElementById("marginal");
</script>
</body>
</html>
