<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Income Tax Calculator – Fixvity</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
/* ---------- GLOBAL THEME ---------- */
:root{
    --teal:#0b7285;
    --teal-dark:#055160;
    --danger:#c92a2a;
    --success:#0f9d58;
    --border:#d9e2e6;
    --text:#1c1f21;
    --muted:#666;
    --bg:#f4fafb;
    --white:#fff;
    --radius:12px;
    font-family:"Inter",system-ui,Arial;
}

body{
    margin:0;
    background:var(--bg);
    color:var(--text);
}

/* ---------- LAYOUT ---------- */
.container{
    max-width:1200px;
    margin:auto;
    padding:16px;
}

.section-title{
    background:var(--teal);
    color:white;
    padding:12px 16px;
    font-size:20px;
    font-weight:800;
    border-radius:var(--radius);
    margin-top:26px;
    margin-bottom:10px;
}

/* GRID */
.grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:26px;
}
@media(max-width:900px){
    .grid{ grid-template-columns:1fr; }
}

/* ---------- CARD ---------- */
.card{
    background:var(--white);
    padding:18px;
    border-radius:var(--radius);
    box-shadow:0 4px 16px rgba(0,0,0,0.06);
    border:1px solid var(--border);
}

/* ---------- INPUT ROW ---------- */
.row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:16px;
}

.row label{
    flex:1;
    font-weight:600;
}

.row input, 
.row select{
    width:180px;
    padding:10px;
    border:1px solid var(--border);
    border-radius:var(--radius);
    font-size:15px;
}

.helper{
    color:var(--muted);
    font-size:13px;
    margin-left:10px;
    flex-basis:160px;
    text-align:left;
}

@media(max-width:900px){
    .row{
        flex-direction:column;
        align-items:flex-start;
    }
    .row input, .row select{
        width:100%;
    }
    .helper{
        margin-top:4px;
        margin-left:0;
    }
}

/* ---------- BUTTONS ---------- */
button{
    background:var(--teal);
    color:white;
    border:0;
    padding:12px 18px;
    border-radius:var(--radius);
    font-weight:800;
    cursor:pointer;
    margin-right:8px;
}
button:hover{
    background:var(--teal-dark);
}

#clearBtn { background:#999; }
#clearBtn:hover { background:#777; }

#savePNG { background:#0f9d58; }
#savePNG:hover { background:#0b7e43; }

/* Mobile button fix */
@media(max-width:800px){
    button{
        width:100%;
        margin-bottom:8px;
    }
}
</style>
</head>

<body>

<div class="container">

<h1 style="text-align:center;color:var(--teal);font-weight:900;">
    Fixvity – Income Tax Calculator (2024–2028)
</h1>

<div class="grid">

<!-- ============================================================== -->
<!-- LEFT COLUMN — INPUTS -->
<!-- ============================================================== -->
<div>

    <!-- Filing Section -->
    <div class="section-title">Filing Information</div>
    <div class="card">

        <div class="row">
            <label>Tax Year</label>
            <select id="taxYear">
                <option>2024</option>
                <option>2025</option>
                <option>2026</option>
                <option>2027</option>
                <option>2028</option>
            </select>
        </div>

        <div class="row">
            <label>Filing Status</label>
            <select id="filing">
                <option value="single">Single</option>
                <option value="married_joint">Married Filing Jointly</option>
                <option value="married_separate">Married Filing Separately</option>
                <option value="head">Head of Household</option>
                <option value="widow">Qualified Widow(er)</option>
            </select>
        </div>

        <div class="row">
            <label>Age</label>
            <input id="age" type="number" value="30">
        </div>

        <div class="row">
            <label>Children Under 17</label>
            <input id="depUnder17" type="number" value="0">
        </div>

        <div class="row">
            <label>Other Dependents</label>
            <input id="depOther" type="number" value="0">
        </div>
    </div>

    <!-- Income -->
    <div class="section-title">Income</div>
    <div class="card">

        <div class="row"><label>Wages</label> <input id="wages" type="number" value="0"></div>
        <div class="row"><label>Federal Tax Withheld</label> <input id="fedWithheld" type="number" value="0"></div>
        <div class="row"><label>State Tax Withheld</label> <input id="stateWithheld" type="number" value="0"></div>
        <div class="row"><label>Local Tax Withheld</label> <input id="localWithheld" type="number" value="0"></div>

        <div class="row"><label>Interest Income</label> <input id="interest" type="number" value="0"></div>
        <div class="row"><label>Ordinary Dividends</label> <input id="dividends" type="number" value="0"></div>
        <div class="row"><label>Qualified Dividends</label> <input id="qualifiedDiv" type="number" value="0"></div>
        <div class="row"><label>Short-Term Capital Gains</label> <input id="stcg" type="number" value="0"></div>
        <div class="row"><label>Long-Term Capital Gains</label> <input id="ltcg" type="number" value="0"></div>
        <div class="row"><label>Business / Self-Employment</label> <input id="selfBiz" type="number" value="0"></div>
        <div class="row"><label>Passive Income</label> <input id="passive" type="number" value="0"></div>
        <div class="row"><label>Social Security</label> <input id="socialSec" type="number" value="0"></div>
        <div class="row"><label>Other Income</label> <input id="otherIncome" type="number" value="0"></div>

    </div>

    <!-- Deductions -->
    <div class="section-title">Deductions</div>
    <div class="card">

        <div class="row"><label>Mortgage Interest</label> <input id="mortgage" type="number" value="0"></div>
        <div class="row"><label>Real Estate Taxes</label> <input id="realEstate" type="number" value="0"></div>
        <div class="row"><label>Charitable Donations</label> <input id="charity" type="number" value="0"></div>
        <div class="row"><label>Student Loan Interest</label> <input id="studentLoan" type="number" value="0"></div>
        <div class="row"><label>IRA Contribution</label> <input id="ira" type="number" value="0"></div>
        <div class="row"><label>Education Expenses</label> <input id="education" type="number" value="0"></div>
        <div class="row"><label>Other Deductions</label> <input id="otherDed" type="number" value="0"></div>

    </div>

</div><!-- END LEFT COLUMN -->

<!-- ============================================================== -->
<!-- RIGHT COLUMN — RESULTS -->
<!-- ============================================================== -->
<div>
    <div class="section-title">Results</div>
    <div class="card" id="resultsCard">

        <p><strong>Total Income:</strong> <span id="out_totalIncome">—</span></p>
        <p><strong>Taxable Income:</strong> <span id="out_taxable">—</span></p>
        <p><strong>Federal Tax:</strong> <span id="out_fedTax">—</span></p>
        <p><strong>Credits:</strong> <span id="out_credits">—</span></p>
        <p><strong>Total Tax Liability:</strong> <span id="out_totalTax">—</span></p>
        <p><strong>Withholding & Payments:</strong> <span id="out_prepay">—</span></p>
        <p><strong>Refund / Amount Due:</strong> <span id="out_refund">—</span></p>

        <button id="calcBtn">Calculate</button>
        <button id="clearBtn">Clear</button>
        <button id="savePNG">Download PNG</button>

    </div>
</div>

</div><!-- END GRID -->

</div><!-- END CONTAINER -->


<!-- ========================== -->
<!--      FULL JS ENGINE        -->
<!-- ========================== -->

<script>

/* ----------------------- */
/* Helper */
const $ = id => document.getElementById(id);

/* ----------------------- */
/* TAX BRACKETS (2024–2028) */
const TAX_BRACKETS = {
    2024:{
        single:[[0,11000,0.10],[11000,44725,0.12],[44725,95375,0.22],[95375,182100,0.24],[182100,231250,0.32],[231250,578125,0.35],[578125,1e9,0.37]],
        married_joint:[[0,22000,0.10],[22000,89450,0.12],[89450,190750,0.22],[190750,364200,0.24],[364200,462500,0.32],[462500,693750,0.35],[693750,1e9,0.37]],
        married_separate:[[0,11000,0.10],[11000,44725,0.12],[44725,95375,0.22],[95375,182100,0.24],[182100,231250,0.32],[231250,346875,0.35],[346875,1e9,0.37]],
        head:[[0,15700,0.10],[15700,59850,0.12],[59850,95350,0.22],[95350,182100,0.24],[182100,231250,0.32],[231250,578100,0.35],[578100,1e9,0.37]],
        widow:"married_joint"
    }
};

/* inflation factor */
const infl = 1.022;

/* Build years 2025–2028 */
for(let y=2025;y<=2028;y++){
    TAX_BRACKETS[y]={};
    let prev=TAX_BRACKETS[y-1];
    ["single","married_joint","married_separate","head"].forEach(f=>{
        TAX_BRACKETS[y][f]=prev[f].map(b=>[Math.round(b[0]*infl),Math.round(b[1]*infl),b[2]]);
    });
    TAX_BRACKETS[y]["widow"]=TAX_BRACKETS[y]["married_joint"];
}

/* ------------------------ */
/* STANDARD DEDUCTION */
const STD_DED={
    2024:{ single:14600, married_joint:29200, married_separate:14600, head:21900, widow:29200 }
};
for(let y=2025;y<=2028;y++){
    STD_DED[y]={};
    Object.keys(STD_DED[y-1]).forEach(f=>{
        STD_DED[y][f]=Math.round(STD_DED[y-1][f]*infl);
    });
}

/* age bonus */
function ageBonus(f){
    if(f==="single"||f==="head") return 1900;
    return 1500;
}

/* ------------------------ */
/* Federal tax calculator */
function calcFed(taxable,year,filing){
    const b=TAX_BRACKETS[year][filing];
    let tax=0;
    for(const [lo,hi,r] of b){
        if(taxable>lo){
            const amt=Math.min(taxable,hi)-lo;
            tax+=amt*r;
        }
    }
    return tax;
}

/* ------------------------ */
/* Simple LTCG model */
function calcLTCG(taxableExCG, ltcg){
    if(ltcg<=0) return 0;
    return ltcg*0.15; /* simplified standard calc */
}

/* ------------------------ */
/* Child tax credit */
function childCredit(u17,other){
    return u17*2000 + other*500;
}

/* ------------------------ */
/* MAIN ENGINE */
function calculateTaxEngine(){
    const year=Number($("taxYear").value);
    const filing=$("filing").value;
    const age=Number($("age").value);

    /* Get values */
    const wages=Number($("wages").value)||0;
    const interest=Number($("interest").value)||0;
    const divs=Number($("dividends").value)||0;
    const qdiv=Number($("qualifiedDiv").value)||0;
    const stcg=Number($("stcg").value)||0;
    const ltcg=Number($("ltcg").value)||0;
    const biz=Number($("selfBiz").value)||0;
    const passive=Number($("passive").value)||0;
    const ss=Number($("socialSec").value)||0;
    const other=Number($("otherIncome").value)||0;

    const totalIncome=wages+interest+divs+stcg+ltcg+biz+passive+ss+other;

    /* Deduction */
    let deduction=STD_DED[year][filing];
    if(age>=65) deduction+=ageBonus(filing);

    deduction+=Number($("mortgage").value)||0;
    deduction+=Number($("realEstate").value)||0;
    deduction+=Number($("charity").value)||0;
    deduction+=Number($("studentLoan").value)||0;
    deduction+=Number($("ira").value)||0;
    deduction+=Number($("education").value)||0;
    deduction+=Number($("otherDed").value)||0;

    const taxable = Math.max(0,totalIncome-deduction);

    /* tax regular */
    const taxableEx = taxable - ltcg;
    const fedRegular = calcFed(taxableEx,year,filing);

    /* LTCG */
    const fedCG = calcLTCG(taxableEx, ltcg);

    const fedTax = fedRegular + fedCG;

    /* Credits */
    const credits = childCredit(Number($("depUnder17").value)||0, Number($("depOther").value)||0);

    const finalTax = Math.max(0,fedTax - credits);

    /* Withholding */
    const fedW=Number($("fedWithheld").value)||0;
    const stateW=Number($("stateWithheld").value)||0;
    const localW=Number($("localWithheld").value)||0;

    const prepay=fedW+stateW+localW;

    const refund = prepay - finalTax;

    /* UI output */
    $("out_totalIncome").textContent="$"+totalIncome.toLocaleString();
    $("out_taxable").textContent="$"+taxable.toLocaleString();
    $("out_fedTax").textContent="$"+fedTax.toLocaleString();
    $("out_credits").textContent="$"+credits.toLocaleString();
    $("out_totalTax").textContent="$"+finalTax.toLocaleString();
    $("out_prepay").textContent="$"+prepay.toLocaleString();

    $("out_refund").textContent = refund>=0
        ? "$"+refund.toLocaleString()
        : "DUE $"+Math.abs(refund).toLocaleString();

    $("out_refund").style.color = refund>=0 ? "var(--success)" : "var(--danger)";
}

/* Buttons */
$("calcBtn").addEventListener("click",calculateTaxEngine);

$("clearBtn").addEventListener("click",()=>{ location.reload(); });

/* PNG export */
$("savePNG").addEventListener("click",()=>{
    html2canvas(document.getElementById("resultsCard"),{
        scale:2,
        backgroundColor:"#ffffff"
    }).then(canvas=>{
        const link=document.createElement("a");
        link.download="Fixvity-Tax-Result.png";
        link.href=canvas.toDataURL();
        link.click();
    });
});

</script>

</body>
</html>
