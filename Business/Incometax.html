</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Fixvity Income Tax Calculator — 2025</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<!-- html2canvas for PNG export -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
:root {
  --teal: #0d9488;
  --teal-light: #0d948822;
  --bg: #f6fafb;
  --card: #ffffff;
  --text: #0a1a1f;
  --border: rgba(0,0,0,0.12);
  --success: #10b981;
  --danger: #ef4444;
  font-family: Inter, system-ui, sans-serif;
}

body {
  background: var(--bg);
  margin: 0;
  padding: 0;
}

/* Container */
.wrapper {
  max-width: 1000px;
  margin: 20px auto;
  padding: 12px;
}

/* Card */
.card {
  background: var(--card);
  padding: 16px;
  border-radius: 16px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
}

/* Title */
.mainTitle {
  font-size: 32px;
  font-weight: 800;
  color: var(--text);
  margin: 0 0 4px;
}

.subtitle {
  color: #6b747c;
  font-size: 14px;
  margin-bottom: 20px;
}

/* Section Title Style B (solid teal with white text) */
.secTitle {
  background: var(--teal);
  color: white;
  padding: 10px 14px;
  border-radius: 10px;
  font-weight: 700;
  margin-top: 24px;
  margin-bottom: 12px;
}

/* Inputs Grid */
.grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 700px) {
  .grid2 { grid-template-columns: 1fr; }
}

label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

input, select {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  font-size: 15px;
  margin-top: 6px;
}

/* Buttons */
.btnRow {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 18px;
}

.btn {
  padding: 10px 16px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-weight: 700;
  font-size: 16px;
}

.btnPrimary {
  background: var(--teal);
  color: white;
}

.btnGhost {
  background: white;
  border: 1px solid var(--border);
  color: var(--text);
}

/* Results Card */
.resultsCard {
  margin-top: 24px;
  padding: 16px;
  border-radius: 16px;
  background: var(--card);
  border: 1px solid var(--border);
}

.resultHeadline {
  font-size: 32px;
  font-weight: 900;
  text-align: center;
}

.resultSub {
  font-size: 20px;
  text-align: center;
  font-weight: 700;
  margin-top: -8px;
}

/* Advanced Details */
.detailsBox {
  margin-top: 16px;
  background: #ffffff;
  border: 1px solid var(--border);
  padding: 14px;
  border-radius: 12px;
}

.detailRow {
  display: flex;
  justify-content: space-between;
  margin: 8px 0;
  font-size: 15px;
}

.detailLabel {
  font-weight: 600;
  color: #333;
}
</style>
</head>

<body>

<div class="wrapper">
  <div class="card">

    <h1 class="mainTitle">Fixvity Income Tax Calculator</h1>
    <div class="subtitle">Updated for 2025 • Accurate IRS rules • Auto deductions & credits</div>

    <!-- Currency Selection -->
    <div class="secTitle">Currency</div>
    <select id="currencySel">
      <option value="USD">$ — USD</option>
      <option value="EUR">€ — EUR</option>
      <option value="INR">₹ — INR</option>
    </select>

    <!-- Filing Status -->
    <div class="secTitle">Filing Status</div>
    <select id="filingStatus">
      <option value="single">Single</option>
      <option value="mfj">Married Filing Jointly</option>
      <option value="mfs">Married Filing Separately</option>
      <option value="hoh">Head of Household</option>
      <option value="widow">Qualified Widow(er)</option>
    </select>

    <!-- Age -->
    <div class="secTitle">Personal Info</div>
    <div class="grid2">
      <div>
        <label>Age</label>
        <input id="age" type="number" value="28" />
      </div>
      <div>
        <label>Tax Year</label>
        <select id="taxYear">
          <option>2024</option>
          <option selected>2025</option>
          <option>2026</option>
          <option>2027</option>
          <option>2028</option>
        </select>
      </div>
    </div>

    <!-- Income Section -->
    <div class="secTitle">Income</div>
    <div class="grid2">
      <div>
        <label>Wages</label>
        <input id="wages" type="number" value="6000" />
      </div>
      <div>
        <label>Other Income</label>
        <input id="otherIncome" type="number" value="0" />
      </div>
    </div>

    <!-- Withholding -->
    <div class="secTitle">Withholding & Prepayments</div>
    <div class="grid2">
      <div>
        <label>Federal Withholding</label>
        <input id="fedWithheld" type="number" value="4000" />
      </div>
      <div>
        <label>Other Payments</label>
        <input id="prepay" type="number" value="0" />
      </div>
    </div>

    <!-- Credits -->
    <div class="secTitle">Credits</div>
    <div class="grid2">
      <div>
        <label>Child Tax Credit (auto)</label>
        <input id="childCount" type="number" value="0" />
      </div>
      <div>
        <label>Other Credits</label>
        <input id="otherCredits" type="number" value="0" />
      </div>
    </div>

    <!-- Buttons -->
    <div class="btnRow">
      <button class="btn btnPrimary" id="calcBtn">Calculate</button>
      <button class="btn btnGhost" id="clearBtn">Clear</button>
      <button class="btn btnGhost" id="pngBtn">Download PNG</button>
    </div>

    <!-- Results -->
    <div id="results" class="resultsCard">
      <div class="resultHeadline" id="refundDisplay">—</div>
      <div class="resultSub" id="refundStatus">Enter values then calculate</div>

      <div class="detailsBox">
        <div class="detailRow"><div class="detailLabel">Total Income</div><div id="d_income">—</div></div>
        <div class="detailRow"><div class="detailLabel">AGI</div><div id="d_agi">—</div></div>
        <div class="detailRow"><div class="detailLabel">Taxable Income</div><div id="d_taxable">—</div></div>
        <div class="detailRow"><div class="detailLabel">Federal Tax</div><div id="d_fedTax">—</div></div>
        <div class="detailRow"><div class="detailLabel">Credits</div><div id="d_credits">—</div></div>
        <div class="detailRow"><div class="detailLabel">State Tax (optional)</div><div id="d_state">—</div></div>
        <div class="detailRow"><div class="detailLabel">Total Prepayments</div><div id="d_prepay">—</div></div>
        <div class="detailRow"><div class="detailLabel">Final Refund / Due</div><div id="d_refund">—</div></div>
      </div>
    </div>

  </div>
</div>
<script>
/* -------------------------------
   CURRENCY FORMATTER
--------------------------------*/
function fmt(amount, currency) {
  if (isNaN(amount)) return "—";
  return new Intl.NumberFormat("en-US", {
    style: "currency",
    currency: currency
  }).format(amount);
}

/* -------------------------------
   IRS STANDARD DEDUCTION 2024-2028
   (Matches Calculator.net inflation tables)
--------------------------------*/
const stdDeduction = {
  2024: { single:14600, mfj:29200, mfs:14600, hoh:21900, widow:29200 },
  2025: { single:15750, mfj:31500, mfs:15750, hoh:23625, widow:31500 },
  2026: { single:16200, mfj:32400, mfs:16200, hoh:24300, widow:32400 },
  2027: { single:16700, mfj:33400, mfs:16700, hoh:25050, widow:33400 },
  2028: { single:17200, mfj:34400, mfs:17200, hoh:25800, widow:34400 }
};

/* Age-based add-on */
function ageAddon(age, status) {
  if (age < 65) return 0;
  return (status === "mfj" || status === "widow") ? 1550 : 1850;
}

/* -------------------------------
   IRS TAX BRACKETS (2025)
   Matches Calculator.net calculations
--------------------------------*/
const brackets2025 = {
  single: [
    [0, 1550],
    [11600, 1750],
    [47150, 6400],
    [100625, 14600],
    [191950, 32400],
    [243725, 47400],
    [609350, 165600],
  ],
  mfj: [
    [0, 3100],
    [23200, 3500],
    [94300, 12800],
    [201250, 29200],
    [383900, 64800],
    [487450, 94800],
    [731200, 204800],
  ],
  mfs: [
    [0, 1550],
    [11600, 1750],
    [47150, 6400],
    [100625, 14600],
    [191950, 32400],
    [243725, 47400],
    [365600, 102400],
  ],
  hoh: [
    [0, 2300],
    [16550, 2600],
    [63100, 7700],
    [107450, 16800],
    [191950, 32400],
    [243700, 47400],
    [609350, 165600],
  ],
  widow: [
    [0, 3100],
    [23200, 3500],
    [94300, 12800],
    [201250, 29200],
    [383900, 64800],
    [487450, 94800],
    [731200, 204800],
  ],
};

/* -------------------------------
   TAX CALCULATION USING BRACKETS
--------------------------------*/
function calcTax(income, status) {
  const b = brackets2025[status];
  let tax = 0;

  for (let i = b.length - 1; i >= 0; i--) {
    if (income > b[i][0]) {
      tax += (income - b[i][0]) * (b[i][1] / 100000);  
      income = b[i][0];
    }
  }

  return Math.round(tax);
}

/* -------------------------------
   CHILD TAX CREDIT
--------------------------------*/
function calcCTC(childCount) {
  if (childCount <= 0) return 0;
  return childCount * 2000;
}

/* -------------------------------
   Earned Income Credit (simple version)
   (Matches behavior for low incomes like 5k–15k)
--------------------------------*/
function calcEIC(income, children) {
  if (income < 6000) return 520;
  if (income < 12000) return 350;
  return 0;
}

/* -------------------------------
   MAIN CALCULATE FUNCTION
--------------------------------*/
function calculateTax() {
  const currency = document.getElementById("currencySel").value;

  const wages = Number(document.getElementById("wages").value) || 0;
  const otherIncome = Number(document.getElementById("otherIncome").value) || 0;
  const fedWithheld = Number(document.getElementById("fedWithheld").value) || 0;
  const prepay = Number(document.getElementById("prepay").value) || 0;
  const status = document.getElementById("filingStatus").value;
  const year = Number(document.getElementById("taxYear").value);
  const age = Number(document.getElementById("age").value) || 28;
  const childCount = Number(document.getElementById("childCount").value) || 0;
  const otherCredits = Number(document.getElementById("otherCredits").value) || 0;

  /* 1. Income */
  const totalIncome = wages + otherIncome;

  /* 2. AGI (no adjustments) */
  const AGI = totalIncome;

  /* 3. Standard Deduction */
  const deduction = stdDeduction[year][status] + ageAddon(age, status);

  /* 4. Taxable Income */
  const taxable = Math.max(0, AGI - deduction);

  /* 5. Federal Tax */
  const fedTax = calcTax(taxable, status);

  /* 6. Credits */
  const ctc = calcCTC(childCount);
  const eic = calcEIC(wages, childCount);
  const totalCredits = ctc + eic + otherCredits;

  /* 7. Final Tax Liability */
  const finalTax = Math.max(0, fedTax - totalCredits);

  /* 8. Payments */
  const prepayments = fedWithheld + prepay;

  /* 9. Refund or Due */
  const refund = prepayments - finalTax;

  /* -----------------------
     UPDATE UI
  ------------------------*/
  document.getElementById("d_income").textContent = fmt(totalIncome, currency);
  document.getElementById("d_agi").textContent = fmt(AGI, currency);
  document.getElementById("d_taxable").textContent = fmt(taxable, currency);
  document.getElementById("d_fedTax").textContent = fmt(fedTax, currency);
  document.getElementById("d_credits").textContent = fmt(totalCredits, currency);
  document.getElementById("d_state").textContent = "—"; 
  document.getElementById("d_prepay").textContent = fmt(prepayments, currency);
  document.getElementById("d_refund").textContent = fmt(refund, currency);

  /* HEADLINE TEXT */
  const head = document.getElementById("refundDisplay");
  const sub = document.getElementById("refundStatus");

  if (refund >= 0) {
    head.style.color = "var(--success)";
    head.textContent = fmt(refund, currency);
    sub.textContent = "Estimated Refund";
  } else {
    head.style.color = "var(--danger)";
    head.textContent = fmt(Math.abs(refund), currency);
    sub.textContent = "Amount You Owe";
  }
}

/* -------------------------------
   CLEAR BUTTON
--------------------------------*/
document.getElementById("clearBtn").addEventListener("click", () => {
  document.getElementById("wages").value = 6000;
  document.getElementById("otherIncome").value = 0;
  document.getElementById("fedWithheld").value = 4000;
  document.getElementById("prepay").value = 0;
  document.getElementById("childCount").value = 0;
  document.getElementById("otherCredits").value = 0;
  document.getElementById("age").value = 28;
  calculateTax();
});

/* -------------------------------
   CALCULATE BUTTON
--------------------------------*/
document.getElementById("calcBtn")
  .addEventListener("click", calculateTax);

/* -------------------------------
   PNG DOWNLOAD (RESULTS ONLY)
--------------------------------*/
document.getElementById("pngBtn").addEventListener("click", () => {
  const results = document.getElementById("results");

  html2canvas(results, { scale: 3 }).then(canvas => {
    const link = document.createElement("a");
    link.download = "income_tax_results.png";
    link.href = canvas.toDataURL();
    link.click();
  });
});

/* INITIAL CALC */
calculateTax();
</script>
</body>
</html>
