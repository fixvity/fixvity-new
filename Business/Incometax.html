<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>USA Income Tax Calculator (Pro-Max)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --accent:#2563eb;
  --muted:#6b7280;
  --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.08);
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg)}
.container{max-width:1200px;margin:auto;padding:20px}
h1{text-align:center;color:var(--accent)}
.grid{display:grid;grid-template-columns:420px 1fr;gap:20px}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
label{font-size:13px;color:var(--muted)}
input,select,button{
  width:100%;padding:10px;margin:6px 0 14px;
  border-radius:10px;border:1px solid #e5e7eb
}
button{background:var(--accent);color:#fff;border:none;cursor:pointer}
button.secondary{background:#eef2ff;color:#111}
.results{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.box{background:#f8fafc;border-radius:12px;padding:14px;text-align:center}
.box h3{margin:0;color:var(--accent)}
table{width:100%;border-collapse:collapse;margin-top:16px}
th,td{padding:8px;border-bottom:1px solid #e5e7eb;text-align:right}
th{text-align:left;color:var(--muted)}
canvas{max-height:260px;margin-top:20px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
@media print{button{display:none}}
</style>
</head>

<body>
<div class="container">
<h1>ðŸ‡ºðŸ‡¸ USA Income Tax Calculator</h1>

<div class="grid">

<!-- INPUT -->
<div class="card">
<label>Filing Status</label>
<select id="status">
  <option value="single">Single</option>
  <option value="married">Married Filing Jointly</option>
  <option value="hoh">Head of Household</option>
</select>

<label>Annual Income ($)</label>
<input id="income" type="number" value="85000">

<label>Pre-Tax Deductions (401k / HSA)</label>
<input id="pretax" type="number" value="5000">

<label>Employment Type</label>
<select id="self">
  <option value="no">W-2 Employee</option>
  <option value="yes">Self-Employed (1099)</option>
</select>

<label>Children (Child Tax Credit)</label>
<input id="kids" type="number" value="1">

<label>State</label>
<select id="state"></select>

<label>Pay Frequency</label>
<select id="frequency">
  <option value="annual">Annual</option>
  <option value="monthly">Monthly</option>
  <option value="biweekly">Bi-Weekly</option>
  <option value="weekly">Weekly</option>
</select>

<button onclick="calculate()">Calculate</button>
<button class="secondary" onclick="resetAll()">Clear</button>
</div>

<!-- OUTPUT -->
<div class="card">
<small id="periodLabel">Per Year</small>

<div class="results">
  <div class="box"><h3 id="taxable">$0</h3><span>Taxable Income</span></div>
  <div class="box"><h3 id="federal">$0</h3><span>Federal Tax</span></div>
  <div class="box"><h3 id="stateTax">$0</h3><span>State Tax</span></div>
  <div class="box"><h3 id="payroll">$0</h3><span>Payroll / SE</span></div>
  <div class="box"><h3 id="total">$0</h3><span>Total Tax</span></div>
  <div class="box"><h3 id="take">$0</h3><span>Take-Home Pay</span></div>
  <div class="box"><h3 id="rate">0%</h3><span>Effective Rate</span></div>
</div>

<table>
<tr><th>Tax Type</th><th>Amount</th></tr>
<tr><td>Federal</td><td id="tFed">$0</td></tr>
<tr><td>Payroll / SE</td><td id="tPayroll">$0</td></tr>
<tr><td>State</td><td id="tState">$0</td></tr>
<tr><th>Total</th><th id="tTotal">$0</th></tr>
</table>

<canvas id="chart"></canvas>

<button class="secondary" onclick="window.print()">Print</button>
</div>

</div>
</div>

<script>
/* ---------- STATE TAX DATA ---------- */
const STATE_TAX={
 "Alaska":{type:"none"},"Florida":{type:"none"},"Texas":{type:"none"},
 "Nevada":{type:"none"},"Washington":{type:"none"},"Wyoming":{type:"none"},
 "Tennessee":{type:"none"},"New Hampshire":{type:"none"},

 "Colorado":{type:"flat",rate:0.044},
 "Illinois":{type:"flat",rate:0.0495},
 "Indiana":{type:"flat",rate:0.0315},
 "Kentucky":{type:"flat",rate:0.045},
 "Massachusetts":{type:"flat",rate:0.05},
 "Michigan":{type:"flat",rate:0.0425},
 "North Carolina":{type:"flat",rate:0.0475},
 "Utah":{type:"flat",rate:0.0465},

 "California":{type:"progressive",brackets:[[10099,.01],[23942,.02],[37788,.04],[52455,.06],[66295,.08]]},
 "New York":{type:"progressive",brackets:[[8500,.04],[11700,.045],[13900,.0525],[21400,.059],[80650,.0621]]},
 "New Jersey":{type:"progressive",brackets:[[20000,.014],[35000,.0175],[40000,.035],[75000,.055]]},
 "Georgia":{type:"progressive",brackets:[[750,.01],[2250,.02],[3750,.03],[5250,.04],[7000,.05]]}
};

/* Populate states */
const stateSel=document.getElementById("state");
Object.keys(STATE_TAX).forEach(s=>{
 let o=document.createElement("option");
 o.value=s;o.textContent=s;
 stateSel.appendChild(o);
});

/* ---------- FEDERAL DATA ---------- */
const STD_DED={single:14600,married:29200,hoh:21900};
const FEDERAL_BRACKETS={
 single:[[11600,.10],[47150,.12],[100525,.22],[191950,.24]],
 married:[[23200,.10],[94300,.12],[201050,.22],[383900,.24]],
 hoh:[[16550,.10],[63100,.12],[100500,.22],[191950,.24]]
};

/* ---------- UTIL ---------- */
function money(v){return "$"+Math.round(v).toLocaleString()}
function getDivisor(f){return f==="monthly"?12:f==="biweekly"?26:f==="weekly"?52:1}

function progressiveTax(income,brackets){
 let tax=0,prev=0;
 for(const [limit,rate] of brackets){
  if(income>limit){tax+=(limit-prev)*rate;prev=limit}
  else return tax+(income-prev)*rate;
 }
 return tax;
}
function calcStateTax(state,income){
 const s=STATE_TAX[state];
 if(!s||income<=0)return 0;
 if(s.type==="none")return 0;
 if(s.type==="flat")return income*s.rate;
 if(s.type==="progressive")return progressiveTax(income,s.brackets);
 return 0;
}

let chart;

/* ---------- MAIN ---------- */
function calculate(){
 const income=+income.value||0;
 const pretax=+pretax.value||0;
 const status=status.value;
 const self=self.value;
 const kids=+kids.value||0;
 const state=stateSel.value;
 const freq=document.getElementById("frequency").value;

 const adj=Math.max(0,income-pretax);
 const taxableIncome=Math.max(0,adj-STD_DED[status]);

 let federalTax=progressiveTax(taxableIncome,FEDERAL_BRACKETS[status]);
 federalTax=Math.max(0,federalTax-kids*2000);

 let payrollTax=self==="yes"?adj*0.153:adj*0.0765;
 let stateTax=calcStateTax(state,taxableIncome);

 let totalTax=federalTax+payrollTax+stateTax;
 let takeHome=income-totalTax-pretax;
 let eff=income?(totalTax/income*100):0;

 const d=getDivisor(freq);
 document.getElementById("periodLabel").innerText=
  freq==="annual"?"Per Year":freq==="monthly"?"Per Month":freq==="biweekly"?"Per Paycheck":"Per Week";

 taxable.innerText=money(taxableIncome/d);
 federal.innerText=money(federalTax/d);
 payroll.innerText=money(payrollTax/d);
 stateTaxEl.innerText=money(stateTax/d);
 total.innerText=money(totalTax/d);
 take.innerText=money(takeHome/d);
 rate.innerText=eff.toFixed(1)+"%";

 tFed.innerText=money(federalTax);
 tPayroll.innerText=money(payrollTax);
 tState.innerText=money(stateTax);
 tTotal.innerText=money(totalTax);

 if(chart)chart.destroy();
 chart=new Chart(document.getElementById("chart"),{
  type:"pie",
  data:{
   labels:["Federal","Payroll","State","Take-Home"],
   datasets:[{data:[federalTax,payrollTax,stateTax,takeHome],
     backgroundColor:["#2563eb","#22c55e","#f59e0b","#10b981"]}]
  }
 });
}

function resetAll(){
 document.querySelectorAll("input").forEach(i=>i.value=0);
 document.querySelectorAll(".box h3").forEach(h=>h.innerText="$0");
 rate.innerText="0%";
 if(chart)chart.destroy();
}
</script>
</body>
</html>
