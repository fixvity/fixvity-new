<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fixvity – Income Tax Calculator (2024–2028)</title>

<style>
:root{
    --blue:#0d6efd;
    --blue-dark:#084298;
    --border:#d6d6d6;
    --bg:#f7f9fc;
    --white:#fff;
    --text:#111;
    --muted:#666;
    --radius:10px;
    font-family: Inter, system-ui, Arial;
}

body{
    background:var(--bg);
    margin:0;
    color:var(--text);
}

.container{
    max-width:1200px;
    margin:auto;
    padding:20px;
}

/* section titles */
.section-title{
    background:var(--blue);
    color:white;
    padding:10px 14px;
    font-size:20px;
    font-weight:700;
    border-radius:var(--radius);
    margin-top:25px;
    margin-bottom:10px;
}

/* grid layout similar to calculator.net */
.grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:25px;
}
@media(max-width:900px){
    .grid{ grid-template-columns:1fr; }
}

/* cards */
.card{
    background:white;
    padding:16px;
    border-radius:var(--radius);
    border:1px solid var(--border);
    box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

/* input row */
.row{
    display:flex;
    align-items:center;
    margin-bottom:12px;
}
.row label{
    flex:1;
    font-weight:600;
}
.row input, .row select{
    width:180px;
    padding:10px;
    border-radius:var(--radius);
    border:1px solid var(--border);
}
.helper{
    font-size:12px;
    color:var(--muted);
    margin-left:12px;
}
@media(max-width:900px){
    .row{
        flex-direction:column;
        align-items:flex-start;
    }
    .row input, .row select{
        width:100%;
        margin-top:6px;
    }
    .helper{ margin-left:0; margin-top:4px; }
}

/* buttons */
button{
    margin-right:10px;
    padding:10px 18px;
    border:0;
    border-radius:var(--radius);
    font-weight:700;
    cursor:pointer;
    background:var(--blue);
    color:white;
}
button:hover{
    background:var(--blue-dark);
}
</style>
</head>

<body>
<div class="container">

<h1 style="text-align:center;color:var(--blue);font-weight:800;">
    Fixvity – Income Tax Calculator (2024–2028)
</h1>

<form id="taxForm">

<div class="grid">

<!-- LEFT COLUMN -->
<div>

<!-- Filing Status -->
<div class="section-title">Filing Information</div>
<div class="card">

    <div class="row">
        <label>Tax Year</label>
        <select id="taxYear">
            <option value="2024">2024</option>
            <option value="2025">2025</option>
            <option value="2026">2026</option>
            <option value="2027">2027</option>
            <option value="2028">2028</option>
        </select>
    </div>

    <div class="row">
        <label>Filing Status</label>
        <select id="filingStatus">
            <option value="single">Single</option>
            <option value="married_joint">Married Filing Jointly</option>
            <option value="married_separate">Married Filing Separately</option>
            <option value="head">Head of Household</option>
            <option value="widow">Qualified Widow(er)</option>
        </select>
    </div>

    <div class="row">
        <label>Age</label>
        <input id="age" type="number" value="30">
        <div class="helper">Extra deduction if age ≥ 65</div>
    </div>

    <div class="row">
        <label>Children Under 17</label>
        <input id="dep17" type="number" value="0">
    </div>

    <div class="row">
        <label>Other Dependents</label>
        <input id="depOther" type="number" value="0">
    </div>

</div>

<!-- Income -->
<div class="section-title">Income</div>
<div class="card">

    <div class="row">
        <label>Wages (W-2)</label>
        <input id="wages" type="number" value="0">
    </div>

    <div class="row">
        <label>Federal Tax Withheld</label>
        <input id="fedWithheld" type="number" value="0">
    </div>

    <div class="row">
        <label>State Tax Withheld</label>
        <input id="stateWithheld" type="number" value="0">
    </div>

    <div class="row">
        <label>Local Tax Withheld</label>
        <input id="localWithheld" type="number" value="0">
    </div>

    <div class="row">
        <label>Interest Income</label>
        <input id="interest" type="number" value="0">
    </div>

    <div class="row">
        <label>Dividends</label>
        <input id="dividends" type="number" value="0">
    </div>

    <div class="row">
        <label>Qualified Dividends</label>
        <input id="qdiv" type="number" value="0">
    </div>

    <div class="row">
        <label>Short-Term Capital Gains</label>
        <input id="stcg" type="number" value="0">
    </div>

    <div class="row">
        <label>Long-Term Capital Gains</label>
        <input id="ltcg" type="number" value="0">
    </div>

    <div class="row">
        <label>Business Income</label>
        <input id="bizIncome" type="number" value="0">
    </div>

    <div class="row">
        <label>Passive Income</label>
        <input id="passiveIncome" type="number" value="0">
    </div>

    <div class="row">
        <label>Social Security Benefits</label>
        <input id="ssIncome" type="number" value="0">
    </div>

    <div class="row">
        <label>Other Income</label>
        <input id="otherIncome" type="number" value="0">
    </div>

</div>

<!-- Deductions -->
<div class="section-title">Deductions</div>
<div class="card">

    <div class="row">
        <label>Use Standard Deduction</label>
        <input id="useStandard" type="checkbox" checked>
    </div>

    <div class="row">
        <label>Itemized Total</label>
        <input id="itemizedTotal" type="number" value="0">
    </div>

    <div class="row">
        <label>Education Expenses</label>
        <input id="eduSpend" type="number" value="0">
    </div>

    <div class="row">
        <label>State Tax Rate (%)</label>
        <input id="stateRate" type="number" value="0">
    </div>
</div>

</div><!-- END LEFT COLUMN -->
    <script>
/* ===========================================================
   PART 2 — IRS FEDERAL TAX DATA (2024–2028)
   =========================================================== */

const IRS = {

  /* ------------------------------
     STANDARD DEDUCTION (2024–2028)
     ------------------------------ */
  standardDeduction: {
    2024: {
      single: 14600,
      married_joint: 29200,
      married_separate: 14600,
      head: 21900,
      widow: 29200,
      addl65: 1600
    },
    2025: {
      single: 15700,
      married_joint: 31400,
      married_separate: 15700,
      head: 22500,
      widow: 31400,
      addl65: 1700
    },
    2026: {
      single: 16000,
      married_joint: 32000,
      married_separate: 16000,
      head: 23000,
      widow: 32000,
      addl65: 1750
    },
    2027: {
      single: 16400,
      married_joint: 32800,
      married_separate: 16400,
      head: 23500,
      widow: 32800,
      addl65: 1800
    },
    2028: {
      single: 16800,
      married_joint: 33600,
      married_separate: 16800,
      head: 24200,
      widow: 33600,
      addl65: 1850
    }
  },

  /* ------------------------------
     ORDINARY FEDERAL TAX BRACKETS
     ------------------------------ */
  brackets: {
    2024: {
      single: [
        [0,11000,0.10],
        [11000,44725,0.12],
        [44725,95375,0.22],
        [95375,182100,0.24],
        [182100,231250,0.32],
        [231250,578125,0.35],
        [578125,Infinity,0.37]
      ],
      married_joint: [
        [0,22000,0.10],
        [22000,89450,0.12],
        [89450,190750,0.22],
        [190750,364200,0.24],
        [364200,462500,0.32],
        [462500,693750,0.35],
        [693750,Infinity,0.37]
      ],
      married_separate: [
        [0,11000,0.10],
        [11000,44725,0.12],
        [44725,95375,0.22],
        [95375,182100,0.24],
        [182100,231250,0.32],
        [231250,346875,0.35],
        [346875,Infinity,0.37]
      ],
      head: [
        [0,15700,0.10],
        [15700,59850,0.12],
        [59850,95350,0.22],
        [95350,182100,0.24],
        [182100,231250,0.32],
        [231250,578100,0.35],
        [578100,Infinity,0.37]
      ],
      widow: [
        [0,22000,0.10],
        [22000,89450,0.12],
        [89450,190750,0.22],
        [190750,364200,0.24],
        [364200,462500,0.32],
        [462500,693750,0.35],
        [693750,Infinity,0.37]
      ]
    },

    /* 2025 exact IRS proposed values (your chosen set) */
    2025: {
      single: [
        [0,11600,0.10],
        [11600,47150,0.12],
        [47150,100525,0.22],
        [100525,191950,0.24],
        [191950,243725,0.32],
        [243725,609350,0.35],
        [609350,Infinity,0.37]
      ],
      married_joint: [
        [0,23200,0.10],
        [23200,94300,0.12],
        [94300,201050,0.22],
        [201050,383900,0.24],
        [383900,487450,0.32],
        [487450,731200,0.35],
        [731200,Infinity,0.37]
      ],
      married_separate: [
        [0,11600,0.10],
        [11600,47150,0.12],
        [47150,100525,0.22],
        [100525,191950,0.24],
        [191950,243725,0.32],
        [243725,365600,0.35],
        [365600,Infinity,0.37]
      ],
      head: [
        [0,16550,0.10],
        [16550,63150,0.12],
        [63150,100500,0.22],
        [100500,191950,0.24],
        [191950,243700,0.32],
        [243700,609350,0.35],
        [609350,Infinity,0.37]
      ],
      widow: [
        [0,23200,0.10],
        [23200,94300,0.12],
        [94300,201050,0.22],
        [201050,383900,0.24],
        [383900,487450,0.32],
        [487450,731200,0.35],
        [731200,Infinity,0.37]
      ]
    },

    /* 2026–2028 inflation-adjusted projections */
    2026: null,
    2027: null,
    2028: null
  },

  /* ------------------------------
     CAPITAL GAINS BRACKETS
     ------------------------------ */
  capGains: {
    2024: {
      single: [
        [0,44725,0.00],
        [44725,492300,0.15],
        [492300,Infinity,0.20]
      ],
      married_joint: [
        [0,89450,0.00],
        [89450,553850,0.15],
        [553850,Infinity,0.20]
      ],
      head: [
        [0,59750,0.00],
        [59750,523050,0.15],
        [523050,Infinity,0.20]
      ]
    },

    2025: {
      single: [
        [0,47025,0.00],
        [47025,518900,0.15],
        [518900,Infinity,0.20]
      ],
      married_joint: [
        [0,94050,0.00],
        [94050,583750,0.15],
        [583750,Infinity,0.20]
      ],
      head: [
        [0,62950,0.00],
        [62950,551350,0.15],
        [551350,Infinity,0.20]
      ]
    },

    2026: null,
    2027: null,
    2028: null
  },

  /* ------------------------------
     CHILD TAX CREDIT
     ------------------------------ */
  ctc: {
    amountUnder17: 2000,
    amountOther: 500,
    refundableLimit: 1600,
    phaseout: {
      single: 200000,
      married_joint: 400000,
      married_separate: 200000,
      head: 200000,
      widow: 400000
    }
  },

  /* ------------------------------
     EDUCATION CREDITS
     ------------------------------ */
  education: {
    aotc: {
      maxCredit: 2500,
      phaseStart: 80000,
      phaseEnd: 90000
    },
    llc: {
      maxCredit: 2000,
      phaseStart: 59000,
      phaseEnd: 69000
    }
  }
};



/* ===========================================================
   Inflation Functions — auto-generate 2026–2028 data
   =========================================================== */

function inflateBrackets(base, multiplier){
  return base.map(b => [
    Math.round(b[0] * multiplier),
    Math.round(b[1] * multiplier),
    b[2]
  ]);
}

function inflateAllYears(){
  const m = 1.025; // 2.5% inflation each year

  IRS.brackets[2026] = {
    single: inflateBrackets(IRS.brackets[2025].single, m),
    married_joint: inflateBrackets(IRS.brackets[2025].married_joint, m),
    married_separate: inflateBrackets(IRS.brackets[2025].married_separate, m),
    head: inflateBrackets(IRS.brackets[2025].head, m),
    widow: inflateBrackets(IRS.brackets[2025].widow, m)
  };

  IRS.brackets[2027] = {
    single: inflateBrackets(IRS.brackets[2026].single, m),
    married_joint: inflateBrackets(IRS.brackets[2026].married_joint, m),
    married_separate: inflateBrackets(IRS.brackets[2026].married_separate, m),
    head: inflateBrackets(IRS.brackets[2026].head, m),
    widow: inflateBrackets(IRS.brackets[2026].widow, m)
  };

  IRS.brackets[2028] = {
    single: inflateBrackets(IRS.brackets[2027].single, m),
    married_joint: inflateBrackets(IRS.brackets[2027].married_joint, m),
    married_separate: inflateBrackets(IRS.brackets[2027].married_separate, m),
    head: inflateBrackets(IRS.brackets[2027].head, m),
    widow: inflateBrackets(IRS.brackets[2027].widow, m)
  };

  IRS.capGains[2026] = {
    single: inflateBrackets(IRS.capGains[2025].single, m),
    married_joint: inflateBrackets(IRS.capGains[2025].married_joint, m),
    head: inflateBrackets(IRS.capGains[2025].head, m)
  };

  IRS.capGains[2027] = {
    single: inflateBrackets(IRS.capGains[2026].single, m),
    married_joint: inflateBrackets(IRS.capGains[2026].married_joint, m),
    head: inflateBrackets(IRS.capGains[2026].head, m)
  };

  IRS.capGains[2028] = {
    single: inflateBrackets(IRS.capGains[2027].single, m),
    married_joint: inflateBrackets(IRS.capGains[2027].married_joint, m),
    head: inflateBrackets(IRS.capGains[2027].head, m)
  };
}

// Generate inflation-adjusted data immediately
inflateAllYears();
    </script>
    <script>
/* ===========================================================
   PART 3 — FEDERAL TAX CALCULATION ENGINE
   =========================================================== */

/* ------------------------------
   Standard Deduction
   ------------------------------ */
function calcStandardDeduction(year, status, age){
    const base = IRS.standardDeduction[year][status];
    const add65 = IRS.standardDeduction[year].addl65;
    return base + (age >= 65 ? add65 : 0);
}

/* ------------------------------
   Compute regular tax using brackets
   ------------------------------ */
function computeBracketTax(taxable, year, status){
    if(taxable <= 0) return 0;

    const b = IRS.brackets[year][status];
    let tax = 0;

    for (let i=0; i<b.length; i++){
        const [low, high, rate] = b[i];
        if(taxable > low){
            const amount = Math.min(taxable, high) - low;
            if(amount > 0) tax += amount * rate;
        }
    }
    return tax;
}

/* ------------------------------
   Capital Gains Tax
   ------------------------------ */
function computeCapitalGainsTax(ltg, taxableIncome, year, status){
    if(ltg <= 0) return 0;

    const cg = IRS.capGains[year][status];
    let remaining = ltg;
    let tax = 0;

    for(const [low, high, rate] of cg){
        if(taxableIncome > high) continue;

        const room = high - taxableIncome;
        const amt = Math.min(room, remaining);
        if(amt > 0){
            tax += amt * rate;
            remaining -= amt;
        }
        if(remaining <= 0) break;
    }
    return tax;
}

/* ------------------------------
   Child Tax Credit (base)
   ------------------------------ */
function computeCTC(young, other){
    return young * IRS.ctc.amountUnder17 +
           other * IRS.ctc.amountOther;
}

/* ------------------------------
   CTC Phaseout
   ------------------------------ */
function applyCTCPhaseout(agi, year, status, ctcAmount){
    const threshold = IRS.ctc.phaseout[status];
    if(agi <= threshold) return ctcAmount;

    const excess = agi - threshold;
    const reduction = Math.floor(excess / 1000) * 50;
    return Math.max(0, ctcAmount - reduction);
}

/* ------------------------------
   AOTC (Education credit)
   ------------------------------ */
function computeAOTC(edu, agi){
    if(edu <= 0) return 0;

    const e = IRS.education.aotc;
    const base = Math.min(edu * 0.25, e.maxCredit);

    if(agi <= e.phaseStart) return base;
    if(agi >= e.phaseEnd) return 0;

    const pct = (e.phaseEnd - agi) / (e.phaseEnd - e.phaseStart);
    return base * pct;
}

/* ------------------------------
   Lifetime Learning Credit
   ------------------------------ */
function computeLLC(edu, agi){
    if(edu <= 0) return 0;

    const e = IRS.education.llc;
    const base = Math.min(edu * 0.20, e.maxCredit);

    if(agi <= e.phaseStart) return base;
    if(agi >= e.phaseEnd) return 0;

    const pct = (e.phaseEnd - agi) / (e.phaseEnd - e.phaseStart);
    return base * pct;
}

/* ===========================================================
   MASTER CALCULATION FUNCTION (MAIN ENGINE)
   =========================================================== */
function calculateFederalTax(data){

    /* ------------------------------ */
    /*          INCOME TOTAL         */
    /* ------------------------------ */
    const totalIncome =
          data.wages +
          data.interest +
          data.dividends +
          data.qdiv +
          data.stcg +
          data.ltcg +
          data.biz +
          data.passive +
          data.ss +
          data.otherIncome;

    /* ------------------------------ */
    /*          DEDUCTIONS            */
    /* ------------------------------ */
    const standard = calcStandardDeduction(data.year, data.status, data.age);
    const deduction = data.useStandard ? standard : data.itemized;

    const taxable = Math.max(0, totalIncome - deduction);

    /* ------------------------------ */
    /*       CALCULATE TAX            */
    /* ------------------------------ */
    const regTax = computeBracketTax(taxable, data.year, data.status);
    const capTax = computeCapitalGainsTax(data.ltcg, taxable, data.year, data.status);

    let federalTax = regTax + capTax;

    /* ------------------------------ */
    /*         CREDITS                */
    /* ------------------------------ */
    let ctc = computeCTC(data.dep17, data.depOther);
    ctc = applyCTCPhaseout(totalIncome, data.year, data.status, ctc);

    const aotc = computeAOTC(data.eduSpent, totalIncome);
    const llc  = computeLLC(data.eduSpent, totalIncome);

    const totalCredits = ctc + aotc + llc;
    const taxAfterCredits = Math.max(0, federalTax - totalCredits);

    /* ------------------------------ */
    /*         PAYMENTS               */
    /* ------------------------------ */
    const prepay =
          data.fedWithheld +
          data.stateWithheld +
          data.localWithheld +
          data.prepayments;

    const refund = prepay - taxAfterCredits;

    /* ------------------------------ */
    /*         STATE TAX               */
    /* ------------------------------ */
    const stateTax = taxable * (data.stateRate / 100);

    /* ------------------------------ */
    /*         RETURN RESULTS          */
    /* ------------------------------ */
    return {
        totalIncome,
        deduction,
        taxableIncome: taxable,
        regularTax: regTax,
        capTax,
        fedTax: federalTax,
        ctc, aotc, llc,
        totalCredits,
        taxAfterCredits,
        prepay,
        refund,
        stateTax
    };
}
    </script>
    <script>
/* ===========================================================
   PART 4 — UI + EVENT HANDLERS + RESULTS RENDERING
   =========================================================== */

const $ = id => document.getElementById(id);

/* ------------------------------
   Format helpers
   ------------------------------ */
function fmtMoney(n, curr="USD"){
    if (!Number.isFinite(n)) return `${curr} 0`;
    return n.toLocaleString("en-US", {
        style:"currency",
        currency: curr,
        minimumFractionDigits: 0
    });
}
function fmt(n){
    return Number(n).toLocaleString("en-US");
}

/* ------------------------------
   COLLECT ALL FORM INPUT VALUES
   ------------------------------ */
function getFormData(){

    return {
        year: Number($("taxYear").value),
        status: $("filing").value,
        age: Number($("age").value),

        /* income */
        wages: Number($("wages").value)||0,
        interest: Number($("interest").value)||0,
        dividends: Number($("dividends").value)||0,
        qdiv: Number($("qualifiedDiv").value)||0,
        stcg: Number($("stcg").value)||0,
        ltcg: Number($("ltcg").value)||0,
        biz: Number($("selfBiz").value)||0,
        passive: Number($("passive").value)||0,
        ss: Number($("socialSec").value)||0,
        otherIncome: Number($("otherIncome").value)||0,

        /* deductions */
        useStandard: true,
        itemized: Number($("otherDed").value)||0,

        /* dependents */
        dep17: Number($("depUnder17").value)||0,
        depOther: Number($("depOther").value)||0,

        /* education */
        eduSpent: Number($("education").value)||0,

        /* withholding & payments */
        fedWithheld: Number($("fedWithheld").value)||0,
        stateWithheld: Number($("stateWithheld").value)||0,
        localWithheld: Number($("localWithheld").value)||0,
        prepayments: 0,

        /* state */
        stateRate: Number($("stateRate")?.value||0),

        currency: "USD"
    };
}

/* ------------------------------
   RENDER RESULTS
   ------------------------------ */
function renderResults(r){

    $("out_totalIncome").textContent = fmtMoney(r.totalIncome);
    $("out_taxable").textContent = fmtMoney(r.taxableIncome);

    $("out_fedTax").textContent = fmtMoney(r.fedTax);
    $("out_credits").textContent = fmtMoney(r.totalCredits);
    $("out_totalTax").textContent = fmtMoney(r.taxAfterCredits);

    $("out_prepay").textContent = fmtMoney(r.prepay);

    if(r.refund >= 0){
        $("out_refund").textContent = fmtMoney(r.refund);
        $("out_refund").style.color = "green";
    } else {
        $("out_refund").textContent = "Due " + fmtMoney(Math.abs(r.refund));
        $("out_refund").style.color = "red";
    }
}

/* ------------------------------
   MASTER CALCULATE
   ------------------------------ */
function runCalc(){
    const data = getFormData();
    const results = calculateFederalTax(data);
    renderResults(results);
}

/* ------------------------------
   BUTTON EVENTS
   ------------------------------ */
$("calcBtn").addEventListener("click", runCalc);

$("clearBtn").addEventListener("click", ()=>{

    $("wages").value = 0;
    $("fedWithheld").value = 0;
    $("stateWithheld").value = 0;
    $("localWithheld").value = 0;
    $("interest").value = 0;
    $("dividends").value = 0;
    $("qualifiedDiv").value = 0;
    $("stcg").value = 0;
    $("ltcg").value = 0;
    $("selfBiz").value = 0;
    $("passive").value = 0;
    $("socialSec").value = 0;
    $("otherIncome").value = 0;
    $("otherDed").value = 0;
    $("education").value = 0;
    $("depUnder17").value = 0;
    $("depOther").value = 0;
    $("age").value = 30;

    runCalc();
});

/* ------------------------------
   AUTO UPDATE ON ANY INPUT
   ------------------------------ */
document.querySelectorAll("input, select").forEach(el=>{
    el.addEventListener("change", runCalc);
});

/* ------------------------------
   PNG EXPORT
   ------------------------------ */
$("savePNG").addEventListener("click", ()=>{

    html2canvas(document.getElementById("resultsCard"), {scale:2})
    .then(canvas=>{
        const a = document.createElement("a");
        a.href = canvas.toDataURL("image/png");
        a.download = "tax_results.png";
        a.click();
    });
});

/* First load */
runCalc();
    </script>
    </body>
</html>
